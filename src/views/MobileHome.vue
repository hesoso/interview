<script setup>
import { ref, onMounted } from 'vue';
import { Swiper, SwiperSlide } from 'swiper/vue'
import MobileFooter from './components/MobileFooter.vue'
import MobileSkillCard from './components/MobileSkillCard.vue'
import { copyText } from '@/utils/index'

import 'swiper/css'
import 'swiper/css/effect-coverflow'

const sliderTrack = ref(null);

onMounted(() => {
    let track = sliderTrack.value;
    let currentPosition = 0;
    function scroll() {
        currentPosition -= 0.5;
        if (Math.abs(currentPosition) >= 411) {
            currentPosition = 0;
        }
        track.style.transform = `translateX(${currentPosition}px)`;
        requestAnimationFrame(scroll);
    }

    scroll();
});

const copied = ref(false)
const copyLink = async () => {
  copyText(location.href, () => {
    copied.value = true
    setTimeout(() => copied.value = false, 2000)
  })
}

const projectList = [
    {
      width: '49px',
      src: '/images/mobile/project_1.png',
    },
    {
      width: '20px',
      src: '/images/mobile/project_2.png',
    },
    {
      width: '10px',
      src: '/images/mobile/project_3.png',
    },
    {
      width: '34px',
      src: '/images/mobile/project_4.png',
    },
    {
      width: '48px',
      src: '/images/mobile/project_5.png',
    },
    {
      width: '49px',
      src: '/images/mobile/project_1.png',
    },
    {
      width: '20px',
      src: '/images/mobile/project_2.png',
    },
    {
      width: '10px',
      src: '/images/mobile/project_3.png',
    },
    {
      width: '34px',
      src: '/images/mobile/project_4.png',
    },
    {
      width: '48px',
      src: '/images/mobile/project_5.png',
    },
    {
      width: '49px',
      src: '/images/mobile/project_1.png',
    },
    {
      width: '20px',
      src: '/images/mobile/project_2.png',
    },
    {
      width: '10px',
      src: '/images/mobile/project_3.png',
    },
    {
      width: '34px',
      src: '/images/mobile/project_4.png',
    },
    {
      width: '48px',
      src: '/images/mobile/project_5.png',
    },
]

const skillList = [
    {
        src: '/images/skill_1.png',
        tag: 'A',
        title: 'ç»„ä»¶è®¾è®¡ï½œè§„èŒƒæ­å»º',
        desc: 'ç†Ÿæ‚‰è®¾è®¡åŸåˆ™ã€è®¾è®¡ç³»ç»Ÿï¼Œæœ‰ç»„ä»¶ è®¾è®¡ã€è§„èŒƒæ­å»ºå’Œç»´æŠ¤ç»éªŒ'
    },
    {
        src: '/images/skill_2.png',
        tag: 'B',
        title: 'äº§å“è®¾è®¡ï½œUIè®¾è®¡',
        desc: 'ä»å‰æœŸäº§å“åŸå‹åˆ°åæœŸUIè½åœ° å…¨é“¾è·¯äº§å“æ„å»º'
    },
    {
        src: '/images/skill_3.png',
        tag: 'C',
        title: 'AIGCäº§å“çš„è¿ç”¨',
        desc: 'ç›®å‰çƒ­ç«çš„AIGCäº§å“ï¼ŒåŒ…æ‹¬SDã€MJ éƒ½å·²ç»ç†Ÿç»ƒæŒæ¡'
    },
    {
        src: '/images/skill_4.png',
        tag: 'D',
        title: 'å¹³é¢è®¾è®¡èƒ½åŠ›',
        desc: 'å¯ä»¥ç‹¬ç«‹å®Œæˆæ’ç”»å·¥ä½œï¼Œä»¥åŠå‚ä¸äº§å“å‰æœŸç•Œé¢DEMOå®ç°'
    },
]
</script>

<template>
  <div class="mobile_home_wrapper">
    <transition name="fade">
      <div v-if="copied" class="copy-success">
        ç½‘å€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
      </div>
    </transition>
    <div class="bg_top_left"></div>
    <div class="bg_bottom_right"></div>
    <div class="title">Personal work blog</div>
    <div class="top df ai_center jc_between">
      <div class="tips">ç”±äºè¯¥ç½‘ç«™ä¸»è¦å±•ç¤ºåŒ…é‡‘é¾™ä½œå“é›†ï¼Œå»ºè®®ç‚¹å‡»å³æ–¹å¤åˆ¶ç½‘å€åˆ°ç”µè„‘/iPadç«¯è§‚çœ‹ ğŸ«¶ğŸ»</div>
      <div class="copy_link df_center" @click="copyLink">
        <img src="/images/mobile/icon_copy_link.png" draggable="false">
      </div>
    </div>
    <div class="project_list">
        <div class="slider">
            <div class="slider-track" ref="sliderTrack">
                <div class="slide" v-for="(item, index) in projectList" :key="index">
                    <img class="project_item" :src="item.src" :width="item.width" draggable="false">
                </div>
            </div>
        </div>
    </div>
    <div class="skill_list">
        <swiper :initialSlide="1" :slidesPerView="'auto'" :spaceBetween="20"
            :centeredSlides="true" :grabCursor="true">
            <swiper-slide v-for="(item, index) in skillList" :key="index">
                <MobileSkillCard :info="item" />
            </swiper-slide>
        </swiper>
    </div>
  </div>
  <MobileFooter />
</template>

<style scoped>
.mobile_home_wrapper {
  position: relative;
  padding: 144px 0 64px;
}

.bg_top_left {
  position: absolute;
  left: 0;
  top: 35px;
  width: 147px;
  height: 113px;
  background-image: url('/images/mobile/bg_top_left.png');
  background-size: 147px 113px;
  background-repeat: no-repeat;
}

.bg_bottom_right {
  position: absolute;
  right: 0;
  top: 30px;
  width: 375px;
  height: 223px;
  background-image: url('/images/mobile/bg_bottom_right.png');
  background-size: 375px 223px;
  background-repeat: no-repeat;
}

.title {
  padding-left: 24px;
  width: 250px;
  height: 96px;
  font-weight: bold;
  font-size: 40px;
  line-height: 48px;
  text-align: left;
  font-style: normal;
  text-transform: none;
  background: linear-gradient(to top right, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0.6) 100%), 
              linear-gradient(to bottom right, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.6) 50%, rgba(255,255,255,0.05) 100%);
  color: transparent;
  background-clip: text;
}

.top {
  padding: 0 24px;
  margin-top: 16px;
}

.tips {
  height: 40px;
  font-weight: 400;
  font-size: 14px;
  color: rgba(148,163,184,0.9);
  line-height: 20px;
  text-align: justified;
  font-style: normal;
  text-transform: none;
}
.copy_link {
  margin-left: 20px;
  width: 40px;
  height: 40px;
  background: #616197;
  border-radius: 8px 8px 8px 8px;
  flex-shrink: 0;
}
.copy_link img {
  width: 24px;
  height: 24px;
}

.project_list {
    margin-top: 32px;
    width: 100%;
}

.project_list .project_item {
    height: 10px;
}

.slider {
    width: 100%;
    overflow: hidden;
}

.slider-track {
    width: 638px;
    display: flex;
    width: max-content;
}

.slide {
    margin-left: 50px;
}

.skill_list {
    margin-top: 32px;
    width: 100%;
}

.skill_list .swiper {
    width: 100%;
}

.skill_list .swiper-slide {
    width: 320px;
    border-radius: 16px;
}

.copy-success {
  position: fixed;
  top: 30%;
  left: 50%;
  margin-left: -100PX;
  width: 200px;
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.7);
  border: 1px solid #fff;
  color: #fff;
  transition: 0.3s linear;
  z-index: 10000;
}

/* å®šä¹‰è¿‡æ¸¡çš„åŸºç¡€ç±» */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s ease;
  /* 0.5 ç§’å¹³æ»‘è¿‡æ¸¡ */
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
  /* è¿›å…¥æ—¶ä»é€æ˜å˜ä¸ºä¸é€æ˜ï¼Œç¦»å¼€æ—¶ä»ä¸é€æ˜å˜ä¸ºé€æ˜ */
}
</style>
